var e={"":["<em>","</em>"],_:["<strong>","</strong>"],"\n":["<br />"]," ":["<br />"],"-":["<hr />"]};function n(e){return e.replace(RegExp("^"+(e.match(/^(\t| )+/)||"")[0],"gm"),"")}function r(e){return(e+"").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function t(a){var c,o,l,g,p,s=/((?:^|\n+)(?:\n---+|\* \*(?: \*)+)\n)|(?:^```(\w*)\n([\s\S]*?)\n```$)|((?:(?:^|\n+)(?:\t|  {2,}).+)+\n*)|((?:(?:^|\n)([>*+-]|\d+\.)\s+.*)+)|(?:\!\[([^\]]*?)\]\(([^\)]+?)\))|(\[)|(\](?:\(([^\)]+?)\))?)|(?:(?:^|\n+)([^\s].*)\n(\-{3,}|={3,})(?:\n+|$))|(?:(?:^|\n+)(#{1,3})\s*(.+)(?:\n+|$))|(?:`([^`].*?)`)|(  \n\n*|\n{2,}|__|\*\*|[_*])/gm,u=[],m="",i=0,h={};function f(n){var r=e[n.replace(/\*/g,"_")[1]||""],t=u[u.length-1]==n;return r?r[1]?(u[t?"pop":"push"](n),r[0|t]):r[0]:n}function $(){for(var e="";u.length;)e+=f(u[u.length-1]);return e}for(a=a.replace(/^\[(.+?)\]:\s*(.+)$/gm,(function(e,n,r){return h[n.toLowerCase()]=r,""})).replace(/^\n+|\n+$/g,"");l=s.exec(a);)o=a.substring(i,l.index),i=s.lastIndex,c=l[0],o.match(/[^\\](\\\\)*\\$/)||(l[3]||l[4]?c='<pre class="code '+(l[4]?"poetry":l[2].toLowerCase())+'">'+n(r(l[3]||l[4]).replace(/^\n+|\n+$/g,""))+"</pre>":l[6]?((p=l[6]).match(/\./)&&(l[5]=l[5].replace(/^\d+/gm,"")),g=t(n(l[5].replace(/^\s*[>*+.-]/gm,""))),">"===p?p="blockquote":(p=p.match(/\./)?"ol":"ul",g=g.replace(/^(.*)(\n|$)/gm,"<li>$1</li>")),c="<"+p+">"+g+"</"+p+">"):l[8]?c='<img src="'+r(l[8])+'" alt="'+r(l[7])+'">':l[10]?(m=m.replace("<a>",'<a href="'+r(l[11]||h[o.toLowerCase()])+'">'),c=$()+"</a>"):l[9]?c="<a>":l[12]||l[14]?c="<"+(p="h"+(l[14]?l[14].length:"="===l[13][0]?1:2))+">"+t(l[12]||l[15])+"</"+p+">":l[16]?c="<code>"+r(l[16])+"</code>":(l[17]||l[1])&&(c=f(l[17]||"--"))),m+=o,m+=c;return(m+a.substring(i)+$()).trim()}export{t as p};
